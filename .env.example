# OpenIDX Environment Configuration
# Copy this file to .env and fill in the values.
# Run `./scripts/generate-secrets.sh` to auto-generate a .env with random secrets.

# ----- Environment -----
APP_ENV=development
LOG_LEVEL=debug

# ----- Database -----
# Password for PostgreSQL. Used by both the postgres container and service connection strings.
POSTGRES_PASSWORD=CHANGE_ME_postgres_password
DATABASE_URL=postgres://openidx:${POSTGRES_PASSWORD}@localhost:5432/openidx?sslmode=disable

# ----- Redis -----
# Password for Redis. Used by the redis container and service connection strings.
REDIS_PASSWORD=CHANGE_ME_redis_password
REDIS_URL=redis://:${REDIS_PASSWORD}@localhost:6379

# ----- Elasticsearch -----
ELASTICSEARCH_URL=http://localhost:9200

# ----- Keycloak -----
KEYCLOAK_URL=http://localhost:8180
KEYCLOAK_REALM=openidx
KEYCLOAK_CLIENT_ID=openidx-api
# Admin password for Keycloak console (http://localhost:8180)
KEYCLOAK_ADMIN_PASSWORD=CHANGE_ME_keycloak_admin_password

# ----- OPA -----
OPA_URL=http://localhost:8181

# ----- Security -----
# Secret used to sign JWTs. Must be at least 32 characters.
JWT_SECRET=CHANGE_ME_jwt_secret_min_32_chars
# AES-256 encryption key. Must be exactly 32 bytes (characters).
ENCRYPTION_KEY=CHANGE_ME_exactly_32_bytes_long!

# ----- OAuth / OIDC -----
OAUTH_ISSUER=http://localhost:8006
OAUTH_JWKS_URL=http://oauth-service:8006/.well-known/jwks.json

# ----- Frontend -----
VITE_API_URL=http://localhost:8088
VITE_OAUTH_URL=http://localhost:8006
VITE_OAUTH_CLIENT_ID=admin-console
VITE_AUTH_PROVIDER=openidx

# ----- Observability -----
# Grafana admin password (http://localhost:3001)
GRAFANA_ADMIN_PASSWORD=CHANGE_ME_grafana_admin_password

# ----- SMTP (optional) -----
SMTP_HOST=
SMTP_PORT=587
SMTP_USERNAME=
SMTP_PASSWORD=
SMTP_FROM=noreply@openidx.io
